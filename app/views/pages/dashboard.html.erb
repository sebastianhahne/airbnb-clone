<h1>Welcome <%= current_user.username %>. This is your Dashboard</h1>
<div class="wrapper-dashboard">
  <div class="row d-flex justify-content-around">

<!-- List of the instruments you want to rent (shown on the left side) -->

    <div class="m-5">
      <p>Your bookings:</p>
        <ul class="list-unstyled">
          <% @bookings.each do |booking| %>
            <% if booking.status == "Pending validation" %>
                <li class="dashboard">
                  <div class='product-body'>
                    <h2><%= booking.instrument.name %></h2>
                    <%= link_to "Cancel Booking", booking_path(booking), method: :delete, data: { confirm: "Are you sure you want to delete"} %>
                    <p><strong>From:</strong><%= booking.start_date %></p>
                    <p><strong>To:</strong><%= booking.end_date %></p>
                    <p><strong>Total price: </strong><%= @total_price %> üç∫</p>
                    <p>Waiting for <%= booking.instrument.user.username%> to confirm your request</p>
                  </div>
                </li>
            <% end %>


          <% if booking.status == "Confirmed" %>
                <li class="dashboard">
                  <div class='product-body'>
                    <h2><%= booking.instrument.name %></h2>
                    <%= link_to "Cancel Booking", booking_path(booking), method: :delete, data: { confirm: "Are you sure you want to delete"} %>
                    <p> <strong>From:</strong><%= booking.start_date %></p>
                    <p> <strong>To:</strong><%= booking.end_date %></p>
                    <p><strong>Total price: </strong><%= @total_price %> üç∫</p>
                  </div>
                  <div>
                    <ul>
                      <li><strong>Your booking is confirmed !</strong></li>
                    </ul>
                  </div>
                </li>
            <% end %>


          <% if booking.status == "Canceled" %>
                <li class="dashboard">
                  <div class='product-body'>
                    <h2><%= booking.instrument.name %></h2>
                    <%= link_to "Cancel Booking", booking_path(booking), method: :delete, data: { confirm: "Are you sure you want to delete"} %>
                    <p> <strong>From:</strong><%= booking.start_date %></p>
                    <p> <strong>To:</strong><%= booking.end_date %></p>
                    <p><strong>Total price: </strong><%= @total_price %> üç∫</p>
                  </div>
                <div>
                  <ul>
                    <li><p><%= booking.instrument.user.username %> canceled your booking </p></li>
                  </ul>
               </div>
                </li>
            <% end %>


          <% end %>
        </ul>
    </div>

<!-- List of the instruments you are sharing (shown on the right side) -->

    <div class="m-5">
      <p>Your instruments:</p>
        <ul class="list-unstyled">
          <% @instruments.each do |instrument| %>
            <% instrument.bookings.each do |booking| %>

              <% if booking.status == "Pending validation" %>
                <li class="dashboard">
                  <div class='product-body'>
                    <p><%= booking.user.username %> wants to rent your instrument</p>
                    <p> Dates : <%= booking.start_date %> and <%= booking.end_date %> </p>
                    <li><%= link_to "Accept ", booking_path(booking, booking: {status: "Confirmed"}), method: :patch%></li>
                    <li><%= link_to "Decline", booking_path(booking, booking: {status: "Canceled"}), method: :patch%></li>
                  </div>
                </li>
              <% end %>

            <% end %>

          <% end %>

        </ul>
    </div>


  </div>
</div>
